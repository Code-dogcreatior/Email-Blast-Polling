# Email-Blast-Polling

**智能邮件群发系统 - 基于多账户轮询的营销邮件解决方案**

一个功能强大的邮件群发工具，通过智能账户池管理和自动轮询机制，帮助你高效、安全地发送营销邮件。

## ✨ 核心特性

### 🔄 智能账户池轮询
- **多邮箱自动切换**：支持同时配置多个 QQ 和 163 邮箱账户
- **智能负载均衡**：自动轮询使用账户池中的邮箱，每个账户发送后等待1分钟
- **故障自动跳过**：账户达到限额或出错时自动切换到下一个账户
- **跨天自动恢复**：所有账户达到限额后自动等待至次日0点，重置状态继续发送

### 👁️ 实时预览与测试
- **邮件效果预览**：发送前可实时预览邮件渲染效果，确保样式完美
- **多邮箱测试模式**：支持同时向多个测试邮箱发送，验证邮件在不同客户端的显示效果
- **详细发送报告**：测试模式下显示每个邮箱的发送状态，快速排查问题

### 🖼️ 富文本编辑增强
- **图片自动转换**：上传的图片自动转换为 Base64 编码内嵌邮件，无需外部图床
- **文件大小限制**：自动限制图片大小（1MB以内），确保邮件发送成功率
- **HTML 格式支持**：完整支持 HTML 和内联样式，打造精美邮件模板
- **所见即所得**：编辑区域支持实时预览，一键插入图片到光标位置

### 🛡️ 安全与稳定
- **防封号机制**：合理的发送间隔和账户轮换，降低被邮箱服务商限制的风险
- **错误智能处理**：自动识别频率限制(535错误)并切换账户或等待
- **发送历史记录**：数据库记录每次群发的详细信息，便于追踪和分析
- **云端持续运行**：基于 Laf 云函数，发送任务提交后可关闭页面，后台继续执行

### 🎯 便捷操作
- **简洁的用户界面**：现代化的 UI 设计，操作直观简单
- **一键群发**：从数据库自动获取用户邮箱列表，一键发送给所有用户
- **实时进度显示**：显示当前发送进度、成功/失败数量和使用的账户
- **灵活配置**：支持自定义邮件主题、HTML内容和发送策略

## 🚀 快速开始

### 前置要求
- Laf 云函数账号 
- 配置好 SMTP 服务的邮箱账户（QQ/163）
- 浏览器支持（Chrome、Edge、Firefox 等）
！！！ 如果不想使用LAF可以采用AI将代码转为js嵌入到任意Node环境中启用，效果相同，python理论也可以，但没测试！！！
### 配置邮箱账户池

在 `send-marketing-email.ts` 中配置你的邮箱账户：

```typescript
const emailAccounts = [
  {
    type: '163',
    host: 'smtp.163.com',
    port: 465,
    secure: true,
    user: 'your-email@163.com',
    pass: 'your-auth-code',  // 授权码，非登录密码
    name: '发件人名称',
    isActive: true
  },
  // 添加更多账户...
]
```

### 部署步骤

1. 在 Laf 平台创建两个云函数：
   - `任意.ts`：获取用户邮箱列表
   - `send-marketing-email`：处理邮件发送

2. 部署前端页面：
   - 打开 `邮件群发.html`
   - 修改 API 地址为你的 Laf 云函数地址

3. 开始使用：
   - 上传图片并自动转换为 Base64
   - 编辑邮件内容和主题
   - 预览邮件效果
   - 测试模式验证（可同时发送给多个测试邮箱）
   - 确认无误后开始群发

## 📸 功能截图

<img width="1603" height="916" alt="image" src="https://github.com/user-attachments/assets/36469ff2-3631-4409-81e8-e065d6f244b6" />

> 简洁直观的操作界面

<img width="1422" height="848" alt="image" src="https://github.com/user-attachments/assets/e12d6556-4847-4b7e-a23e-e43b528e0c37" />

> 一键上传图片，自动转换 Base64

<img width="1603" height="916" alt="image" src="https://github.com/user-attachments/assets/2281af67-f65c-47c9-b8b8-bc3d60e716fe" />

> 发送前实时预览邮件效果
<img width="697" height="224" alt="image" src="https://github.com/user-attachments/assets/55c680b0-69b1-4fc5-8109-0437dcb6ce62" />

> 支持多邮箱同时测试


---
## 限额注意 
本项目自动轮询账户池，已达上限的会自动跳过，然而并未完整测试不同运营商上限，在次给出AI解答以供参考。



| 邮箱类型 | 每日发信总量上限 | 单封邮件收件人上限 | 关键限制点 |
| :--- | :--- | :--- | :--- |
| **QQ邮箱 (个人)** | 约 **100封/天**  | 搜索结果未明确 | - 限制针对**陌生发信**（首次联系或对方未回复）<br>- 向已联系的联系人发信**通常不受限**  |
| **163邮箱 (个人)** | **50 - 100封/天**  | **20 - 50人**  (另有信息称最多40人) | - 实际限制可能动态调整 <br>- 单次群发收件人总数受限  |

### 💡 重要提醒与应对策略

除了表格中的数量限制，以下几点同样关键，触及限制可能导致账号被临时冻结或邮件进入垃圾箱：

- **警惕动态限制与处罚**：邮箱服务商会根据反垃圾邮件策略动态调整限制 。如果你在**短时间内高频发送**，即便未达日上限，也可能被系统判定为异常行为，导致发信功能临时受限 。此外，频繁发送相同或相似内容的邮件，也极易被系统当做垃圾邮件处理 。

- **理解限制的范畴**：需要特别注意，QQ邮箱的每日发信量限制主要针对**外部陌生联系人** 。也就是说，给企业内部的同事或已有邮件往来记录的联系人发信，通常**不计算在内** 。

- **应对策略参考**
    - **分批发送**：如果需要发送大量邮件，最稳妥的方法是**将邮件列表分组，在不同时间段分批发送**。
    - **优化发送方式**：避免在短时间内连续发送大量邮件，并确保邮件内容和主题的多样性，降低被判定为垃圾邮件的风险 。
    - **考虑专业服务**：如果确有商业或大规模的邮件发送需求（如电子报、营销邮件），使用**企业邮箱**（有更高且可调整的限额） 或 **专业的第三方邮件推送服务** 是更可靠的选择 。

